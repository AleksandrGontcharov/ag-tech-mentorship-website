"use strict";(globalThis.webpackChunkag_tech_mentoring=globalThis.webpackChunkag_tech_mentoring||[]).push([[8171],{4703:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"specialized-topics/authentication/oidc-flows","title":"\u2705 OpenID Connect Flows","description":"Sources:","source":"@site/docs/specialized-topics/authentication/2.oidc-flows.md","sourceDirName":"specialized-topics/authentication","slug":"/specialized-topics/authentication/oidc-flows","permalink":"/ag-tech-mentorship-website/docs/specialized-topics/authentication/oidc-flows","draft":false,"unlisted":false,"editUrl":"https://github.com/AleksandrGontcharov/ag-tech-mentorship/blob/master/docs/specialized-topics/authentication/2.oidc-flows.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"\ue795 iptables","permalink":"/ag-tech-mentorship-website/docs/specialized-topics/networking/commands/ip-tables"},"next":{"title":"\u2705 OAuth and OpenID Connect","permalink":"/ag-tech-mentorship-website/docs/specialized-topics/authentication/oauth-and-opneid-connect"}}');var t=i(4848),o=i(8453);const c={sidebar_position:1},r="\u2705 OpenID Connect Flows",l={},d=[{value:"OIDC Key Terms",id:"oidc-key-terms",level:3},{value:"OIDC Flows and Application Types",id:"oidc-flows-and-application-types",level:3},{value:"Types of Apps",id:"types-of-apps",level:5},{value:"Flows",id:"flows",level:5}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h3:"h3",h5:"h5",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-openid-connect-flows",children:"\u2705 OpenID Connect Flows"})}),"\n",(0,t.jsx)(n.p,{children:"Sources:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Learning Azure Active Directory for Developers (LinkedIn Learning)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"oidc-key-terms",children:"OIDC Key Terms"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Oidc Authorization Endpoint:"})," Used for identifying the user and asking for consent for access being requests. Features such as 2FA can be set up."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Oidc Token Endpoint:"})," No user interaction, and is used to retrieve access tokens and refresh tokens. Refresh tokens are used to get new access tokens."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ID Token:"})," Encapsulates the user's identity. JWT is a common way to format this token. Has an expiration for a longer duration."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Access Token:"})," Used to call a web API. Has an expiration for a shorter duration."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Refresh Token:"})," Because the Access token has a short expiration, and we sometimes need to get a new Access Token without user interaction, this is where the Refresh Token is used. You use the refresh token to get new access tokens at the token endpoint. Until the refresh token is invalidated, a user can keep requesting access tokens. When invalidated, you may be asked to log in again."]}),"\n",(0,t.jsx)(n.h3,{id:"oidc-flows-and-application-types",children:"OIDC Flows and Application Types"}),"\n",(0,t.jsx)(n.h5,{id:"types-of-apps",children:"Types of Apps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"SPA"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Web App"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Mobile App"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Desktop App"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Daemon App"})}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"flows",children:"Flows"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Implicit Flow"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Try to avoid it because it nearly impossible to build it securely.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The client receives an ",(0,t.jsx)(n.code,{children:"id_token"})," and ",(0,t.jsx)(n.code,{children:"access_token"})," directly from the authorize endpoint. No calls to the token endpoint."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Only reason to use it is if you need to support browsers that don't support PKCE. PKCE is a better alternative to the Implicit Flow."}),"\n",(0,t.jsx)(n.li,{children:"Intelligent Tracking Prevention (ITP) and third-party cookies break implicit flow. Since the Identity Provider is a third-party, its cookies are blocked. As a result, your users will be asked to re-authenticate every time an Access Token expires (usually every 1 hour)."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Implicit Flow: Hybrid Flow"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Suitable if your app is not affected by third-party cookies."}),"\n",(0,t.jsx)(n.li,{children:"Log in button redirects to authorize endpoint."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Auth Code Flow: Without PKCE:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Web applications that can store a secret or desktop and mobile apps that cannot store a secret"}),"\n",(0,t.jsxs)(n.li,{children:["Ask for an Auth Code -> Exchange Auth Code for ",(0,t.jsx)(n.code,{children:"Access_token"})," and ",(0,t.jsx)(n.code,{children:"Refresh_Token"})," --\x3e Use ",(0,t.jsx)(n.code,{children:"refresh_token"})," to ",(0,t.jsx)(n.code,{children:"renew access_token"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Auth Code Flow: With PKCE:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"PKCE:"})," Proof Key for Code Exchange"]}),"\n",(0,t.jsx)(n.li,{children:"Doesn't require you to store a client secret."}),"\n",(0,t.jsx)(n.li,{children:"A secret is generated on the fly, called the code verifier."}),"\n",(0,t.jsx)(n.li,{}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Client Credential Flow"})}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"This is not a complete list of types of Apps and Flows, just the most common scenarios."})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Public Client"})," - Cannot store secrets securely"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Confidential Client"})," -  Can store secrets securely"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>r});var s=i(6540);const t={},o=s.createContext(t);function c(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);