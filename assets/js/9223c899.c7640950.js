"use strict";(self.webpackChunkag_tech_mentoring=self.webpackChunkag_tech_mentoring||[]).push([[214],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6492:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:4},o="\ue795 ip-tables",s={unversionedId:"specialized-topics/networking/commands/ip-tables",id:"specialized-topics/networking/commands/ip-tables",title:"\ue795 ip-tables",description:"_",source:"@site/docs/specialized-topics/networking/commands/ip-tables.md",sourceDirName:"specialized-topics/networking/commands",slug:"/specialized-topics/networking/commands/ip-tables",permalink:"/ag-tech-mentorship-website/docs/specialized-topics/networking/commands/ip-tables",draft:!1,editUrl:"https://github.com/AleksandrGontcharov/ag-tech-mentorship/blob/master/docs/specialized-topics/networking/commands/ip-tables.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\ue795 dhcpd",permalink:"/ag-tech-mentorship-website/docs/specialized-topics/networking/commands/dhcpd"}},l={},p=[{value:"NAT Table",id:"nat-table",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"-ip-tables"},"\ue795 ip-tables"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"iptables")," is a command-line utility in Linux-based systems used to manage and configure the IP packet filtering rules in the kernel's netfilter framework. It allows administrators to define rules for processing incoming and outgoing network traffic based on IP addresses, protocols, ports, and other criteria. These rules can be used for various purposes, such as filtering, NAT (Network Address Translation), and port forwarding."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"iptables")," command provides a rich set of options for creating, modifying, and deleting rules in different tables and chains. Some common actions performed using the ",(0,r.kt)("inlineCode",{parentName:"p"},"iptables")," command include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Creating new rules"),(0,r.kt)("li",{parentName:"ul"},"Modifying existing rules"),(0,r.kt)("li",{parentName:"ul"},"Deleting rules"),(0,r.kt)("li",{parentName:"ul"},"Listing current rules"),(0,r.kt)("li",{parentName:"ul"},"Changing default policies"),(0,r.kt)("li",{parentName:"ul"},"Creating and managing user-defined chains")),(0,r.kt)("p",null,"Typically, the ",(0,r.kt)("inlineCode",{parentName:"p"},"iptables")," command is used with administrative privileges (using ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo")," or as the root user) because it modifies the kernel's packet filtering rules."),(0,r.kt)("p",null,"Here's the general syntax for the ",(0,r.kt)("inlineCode",{parentName:"p"},"iptables")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables [-t table] command [chain] [options] [criteria] -j target\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-t table"),": Specifies the table containing the chain (e.g., filter, nat, mangle, or raw). If omitted, the filter table is used by default."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"command"),": The action to perform, such as adding a new rule (-A), inserting a rule (-I), deleting a rule (-D), listing rules (-L), and more."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"chain"),": The chain in which the rule will be added or modified (e.g., INPUT, OUTPUT, FORWARD, PREROUTING, or POSTROUTING)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"options"),": Various options to modify the command behavior, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"-v")," for verbose output or ",(0,r.kt)("inlineCode",{parentName:"li"},"-n")," for numeric output."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"criteria"),": The conditions that packets must meet to match the rule, such as the source IP address, destination IP address, protocol, or port."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-j target"),": The target specifies the action to take when a packet matches the rule (e.g., ACCEPT, DROP, REJECT, or a user-defined chain).")),(0,r.kt)("h2",{id:"nat-table"},"NAT Table"),(0,r.kt)("p",null,"The 'nat' table in iptables is a specific table used for Network Address Translation (NAT) operations, such as Source Network Address Translation (SNAT) and Destination Network Address Translation (DNAT). The primary purpose of the 'nat' table is to alter the source or destination IP addresses and/or port numbers of packets as they traverse through a router or firewall."),(0,r.kt)("p",null,"The 'nat' table contains the following built-in chains:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"PREROUTING: This chain handles packets when they first arrive at the router or firewall, before routing decisions are made. It is mainly used for DNAT, where the destination IP addresses and/or ports of incoming packets are altered."),(0,r.kt)("li",{parentName:"ol"},"OUTPUT: This chain is used for locally generated packets on the firewall or router itself. It can be used for both DNAT and SNAT operations on these packets."),(0,r.kt)("li",{parentName:"ol"},"POSTROUTING: This chain handles packets after routing decisions have been made and just before they leave the router or firewall. It is mainly used for SNAT, where the source IP addresses and/or ports of outgoing packets are altered.")),(0,r.kt)("p",null,"When configuring iptables rules for NAT operations, the 'nat' table is specified using the ",(0,r.kt)("inlineCode",{parentName:"p"},"-t")," option followed by the table name, like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -t nat <other-options>\n")),(0,r.kt)("p",null,"For example, to set up a basic SNAT rule that allows multiple devices on a private network to share a single public IP address when accessing the internet, you can use the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo iptables -t nat -A POSTROUTING -o <public_interface> -j MASQUERADE`\n")),(0,r.kt)("p",null,"In this command, ",(0,r.kt)("inlineCode",{parentName:"p"},"<public_interface>")," should be replaced with the name of the network interface connected to the internet (e.g., eth0)."))}u.isMDXComponent=!0}}]);