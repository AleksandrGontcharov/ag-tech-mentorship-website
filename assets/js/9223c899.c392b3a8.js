"use strict";(globalThis.webpackChunkag_tech_mentoring=globalThis.webpackChunkag_tech_mentoring||[]).push([[840],{4496:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"specialized-topics/networking/commands/ip-tables","title":"\ue795 iptables","description":"_","source":"@site/docs/specialized-topics/networking/commands/ip-tables.md","sourceDirName":"specialized-topics/networking/commands","slug":"/specialized-topics/networking/commands/ip-tables","permalink":"/ag-tech-mentorship-website/docs/specialized-topics/networking/commands/ip-tables","draft":false,"unlisted":false,"editUrl":"https://github.com/AleksandrGontcharov/ag-tech-mentorship/blob/master/docs/specialized-topics/networking/commands/ip-tables.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"\ue795 dhcpd","permalink":"/ag-tech-mentorship-website/docs/specialized-topics/networking/commands/dhcpd"},"next":{"title":"\u2705 OpenID Connect Flows","permalink":"/ag-tech-mentorship-website/docs/specialized-topics/authentication/oidc-flows"}}');var t=n(4848),r=n(8453);const a={sidebar_position:4},o="\ue795 iptables",l={},c=[{value:"NAT Table",id:"nat-table",level:2},{value:"Tables in iptables",id:"tables-in-iptables",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"-iptables",children:"\ue795 iptables"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"iptables"})," is a command-line utility in Linux-based systems used to manage and configure the IP packet filtering rules in the kernel's netfilter framework. It allows administrators to define rules for processing incoming and outgoing network traffic based on IP addresses, protocols, ports, and other criteria. These rules can be used for various purposes, such as filtering, NAT (Network Address Translation), and port forwarding."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"iptables"})," command provides a rich set of options for creating, modifying, and deleting rules in different tables and chains. Some common actions performed using the ",(0,t.jsx)(s.code,{children:"iptables"})," command include:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Creating new rules"}),"\n",(0,t.jsx)(s.li,{children:"Modifying existing rules"}),"\n",(0,t.jsx)(s.li,{children:"Deleting rules"}),"\n",(0,t.jsx)(s.li,{children:"Listing current rules"}),"\n",(0,t.jsx)(s.li,{children:"Changing default policies"}),"\n",(0,t.jsx)(s.li,{children:"Creating and managing user-defined chains"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Typically, the ",(0,t.jsx)(s.code,{children:"iptables"})," command is used with administrative privileges (using ",(0,t.jsx)(s.code,{children:"sudo"})," or as the root user) because it modifies the kernel's packet filtering rules."]}),"\n",(0,t.jsxs)(s.p,{children:["Here's the general syntax for the ",(0,t.jsx)(s.code,{children:"iptables"})," command:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"iptables [-t table] command [chain] [options] [criteria] -j target\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-t table"}),": Specifies the table containing the chain (e.g., filter, nat, mangle, or raw). If omitted, the filter table is used by default."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"command"}),": The action to perform, such as adding a new rule (-A), inserting a rule (-I), deleting a rule (-D), listing rules (-L), and more."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"chain"}),": The chain in which the rule will be added or modified (e.g., INPUT, OUTPUT, FORWARD, PREROUTING, or POSTROUTING)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"options"}),": Various options to modify the command behavior, such as ",(0,t.jsx)(s.code,{children:"-v"})," for verbose output or ",(0,t.jsx)(s.code,{children:"-n"})," for numeric output."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"criteria"}),": The conditions that packets must meet to match the rule, such as the source IP address, destination IP address, protocol, or port."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-j target"}),": The target specifies the action to take when a packet matches the rule (e.g., ACCEPT, DROP, REJECT, or a user-defined chain)."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"nat-table",children:"NAT Table"}),"\n",(0,t.jsx)(s.p,{children:"The 'nat' table in iptables is a specific table used for Network Address Translation (NAT) operations, such as Source Network Address Translation (SNAT) and Destination Network Address Translation (DNAT). The primary purpose of the 'nat' table is to alter the source or destination IP addresses and/or port numbers of packets as they traverse through a router or firewall."}),"\n",(0,t.jsx)(s.p,{children:"The 'nat' table contains the following built-in chains:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"PREROUTING: This chain handles packets when they first arrive at the router or firewall, before routing decisions are made. It is mainly used for DNAT, where the destination IP addresses and/or ports of incoming packets are altered."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"OUTPUT: This chain is used for locally generated packets on the firewall or router itself. It can be used for both DNAT and SNAT operations on these packets."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"POSTROUTING: This chain handles packets after routing decisions have been made and just before they leave the router or firewall. It is mainly used for SNAT, where the source IP addresses and/or ports of outgoing packets are altered."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["When configuring iptables rules for NAT operations, the 'nat' table is specified using the ",(0,t.jsx)(s.code,{children:"-t"})," option followed by the table name, like this:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"iptables -t nat <other-options>\n"})}),"\n",(0,t.jsx)(s.p,{children:"For example, to set up a basic SNAT rule that allows multiple devices on a private network to share a single public IP address when accessing the internet, you can use the following command:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"sudo iptables -t nat -A POSTROUTING -o <public_interface> -j MASQUERADE`\n"})}),"\n",(0,t.jsxs)(s.p,{children:["In this command, ",(0,t.jsx)(s.code,{children:"<public_interface>"})," should be replaced with the name of the network interface connected to the internet (e.g., eth0)."]}),"\n",(0,t.jsx)(s.h2,{id:"tables-in-iptables",children:"Tables in iptables"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Filter table: This is the default table in iptables and is mainly used for filtering packets based on their content. It has three built-in chains:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"INPUT: This chain processes packets destined for the local system."}),"\n",(0,t.jsx)(s.li,{children:"FORWARD: This chain processes packets that are routed through the local system (i.e., the system is acting as a router for these packets)."}),"\n",(0,t.jsx)(s.li,{children:"OUTPUT: This chain processes packets originating from the local system."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"NAT table: This table is specifically used for Network Address Translation (NAT) and contains three built-in chains:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"PREROUTING: This chain processes packets as soon as they arrive on a network interface, before routing decisions are made. It's mainly used for Destination NAT (DNAT)."}),"\n",(0,t.jsx)(s.li,{children:"OUTPUT: This chain processes locally generated packets that require NAT, before they are sent out of a network interface."}),"\n",(0,t.jsx)(s.li,{children:"POSTROUTING: This chain processes packets after routing decisions have been made and just before they leave a network interface. It's mainly used for Source NAT (SNAT) or Masquerading."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Mangle table: This table is used for specialized packet alteration and has five built-in chains:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"PREROUTING: This chain processes packets as soon as they arrive on a network interface, before routing decisions are made."}),"\n",(0,t.jsx)(s.li,{children:"INPUT: This chain processes packets destined for the local system."}),"\n",(0,t.jsx)(s.li,{children:"FORWARD: This chain processes packets that are routed through the local system."}),"\n",(0,t.jsx)(s.li,{children:"OUTPUT: This chain processes packets originating from the local system."}),"\n",(0,t.jsx)(s.li,{children:"POSTROUTING: This chain processes packets after routing decisions have been made and just before they leave a network interface."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Raw table: This table is used for configuring exemptions from connection tracking in combination with the NOTRACK target. It has two built-in chains:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"PREROUTING: This chain processes packets as soon as they arrive on a network interface, before routing decisions are made."}),"\n",(0,t.jsx)(s.li,{children:"OUTPUT: This chain processes packets originating from the local system."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Only the NAT table is specifically related to NAT, while the other tables serve different purposes in the packet processing flow."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var i=n(6540);const t={},r=i.createContext(t);function a(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);